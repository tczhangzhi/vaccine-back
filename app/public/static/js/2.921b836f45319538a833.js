webpackJsonp([2],{"4iCf":function(e,t){},xbg2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("A9zj"),l=i.n(a),n=i("4YfN"),s=i.n(n),r=i("7/Cp"),c={name:"i-inoculation",mounted:function(){this.fetch()},data:function(){return{pageIndex:1,pageSize:20,total:0,query:{start:"",end:"",configId:"",childId:"",childName:""},showCreate:!1,showEdit:!1,create:this.init(),edit:this.init(),createRule:{start:[{required:!0,message:"请输入最早接种时间",trigger:"blur"}],end:[{required:!0,message:"请输入最晚接种时间",trigger:"blur"}],configId:[{required:!0,message:"请输入疫苗种类",trigger:"blur"}],childId:[{required:!0,message:"请输入儿童姓名",trigger:"blur"}]},editRule:{start:[{required:!0,message:"请输入最早接种时间",trigger:"blur"}],end:[{required:!0,message:"请输入最晚接种时间",trigger:"blur"}],configId:[{required:!0,message:"请输入疫苗种类",trigger:"blur"}],childId:[{required:!0,message:"请输入儿童姓名",trigger:"blur"}]},tableData:[],childList:[],configList:[],timesList:[]}},methods:{fetch:function(){var e=this,t=this.pageIndex,i=this.pageSize,a=this.query;r.b.vaccine.index(s()({pageIndex:t,pageSize:i},a)).then(function(t){e.tableData=t.list,e.total=t.total}).catch(function(t){e.$message({message:t,type:"error"})})},handleSearchClick:function(){this.fetch()},handleSizeChange:function(e){this.pageSize=e,this.fetch()},handleCurrentChange:function(e){this.pageIndex=e,this.fetch()},handleDeleteClick:function(e){var t=this;r.b.vaccine.destroy(e).then(function(e){t.fetch(),t.$message({message:"删除成功!",type:"success"})}).catch(function(e){t.$message({message:e,type:"error"})})},init:function(){return{id:"",start:0,end:0,configId:0,times:0,childId:""}},handleCreateClick:function(){this.showCreate=!0,this.create=this.init()},handleEditClick:function(e){var t=this;this.showEdit=!0,this.edit=this.init(),r.b.vaccine.show(e).then(function(e){t.edit=e}).catch(function(e){t.$message({message:e,type:"error"})})},handleSaveEditClick:function(){var e=this;this.$refs.edit.validate(function(t){if(!t)return!1;var i=e.edit,a=(i.times,l()(i,["times"]));r.b.vaccine.update(a).then(function(t){e.showEdit=!1,e.edit=e.init(),e.fetch(),e.$message({message:"修改成功!",type:"success"})}).catch(function(t){e.$message({message:t,type:"error"})})})},handleSaveCreateClick:function(){var e=this;this.$refs.create.validate(function(t){if(!t)return!1;var i=e.create,a=(i.times,l()(i,["times"]));r.b.vaccine.create(a).then(function(t){e.showCreate=!1,e.create=e.init(),e.fetch(),e.$message({message:"新增成功!",type:"success"})}).catch(function(t){e.$message({message:t,type:"error"})})})},fetchChildList:function(e){var t=this;r.b.child.list({name:e}).then(function(e){t.childList=e}).catch(function(e){t.$message({message:e,type:"error"})})},fetchConfigList:function(e){var t=this;r.b.config.list({id:e}).then(function(e){t.configList=e}).catch(function(e){t.$message({message:e,type:"error"})})},handleConfigIdChange:function(e){e&&0!==this.configList.length&&(this.timesList=this.configList.find(function(t){return t.id===e}).scheduling)},handleTimesEditChange:function(e){0!==this.timesList.length&&(this.edit.start=this.timesList[e].start,this.edit.end=this.timesList[e].end)},handleTimesCreateChange:function(e){0!==this.timesList.length&&(this.create.start=this.timesList[e].start,this.create.end=this.timesList[e].end)}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"i-inoculation"},[i("el-row",[i("el-form",{attrs:{inline:""}},[i("el-form-item",{attrs:{label:"最早接种时间:"}},[i("el-input",{attrs:{placeholder:"请输入最早接种时间"},model:{value:e.query.start,callback:function(t){e.$set(e.query,"start",e._n(t))},expression:"query.start"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最晚接种时间:"}},[i("el-input",{attrs:{placeholder:"请输入最晚接种时间"},model:{value:e.query.end,callback:function(t){e.$set(e.query,"end",e._n(t))},expression:"query.end"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"疫苗种类:"}},[i("el-input",{attrs:{placeholder:"请输入疫苗种类"},model:{value:e.query.configId,callback:function(t){e.$set(e.query,"configId",e._n(t))},expression:"query.configId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"儿童编号:"}},[i("el-input",{attrs:{placeholder:"请输入疫苗种类"},model:{value:e.query.childId,callback:function(t){e.$set(e.query,"childId",e._n(t))},expression:"query.childId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"儿童姓名:"}},[i("el-input",{attrs:{placeholder:"请输入儿童姓名"},model:{value:e.query.childName,callback:function(t){e.$set(e.query,"childName",t)},expression:"query.childName"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSearchClick}},[e._v("查询")]),e._v(" "),i("el-button",{on:{click:e.handleCreateClick}},[e._v("新增")])],1)],1)],1),e._v(" "),i("el-row",[i("el-table",{attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{label:"编号",prop:"id"}}),e._v(" "),i("el-table-column",{attrs:{label:"最早接种时间",prop:"start"}}),e._v(" "),i("el-table-column",{attrs:{label:"最晚接种时间",prop:"end"}}),e._v(" "),i("el-table-column",{attrs:{label:"疫苗种类",prop:"configId"}}),e._v(" "),i("el-table-column",{attrs:{label:"儿童姓名",prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"125"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(i){e.handleEditClick(t.row)}}}),e._v(" "),i("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(i){e.handleDeleteClick(t.row)}}})]}}])})],1)],1),e._v(" "),i("el-row",{staticClass:"i-inoculation__pageination"},[i("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[20,30,40,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:"新增",visible:e.showCreate},on:{"update:visible":function(t){e.showCreate=t}}},[i("el-form",{ref:"create",attrs:{model:e.create,rules:e.createRule}},[i("el-form-item",{attrs:{label:"最早接种时间:"}},[i("el-input",{attrs:{disabled:"",placeholder:"请输入最早接种时间"},model:{value:e.create.start,callback:function(t){e.$set(e.create,"start",e._n(t))},expression:"create.start"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最晚接种时间:"}},[i("el-input",{attrs:{disabled:"",placeholder:"请输入最晚接种时间"},model:{value:e.create.end,callback:function(t){e.$set(e.create,"end",e._n(t))},expression:"create.end"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"疫苗种类:"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入疫苗种类",filterable:"",remote:"","remote-method":e.fetchConfigList},on:{change:function(t){e.handleConfigIdChange(e.create.configId)}},model:{value:e.create.configId,callback:function(t){e.$set(e.create,"configId",e._n(t))},expression:"create.configId"}},e._l(e.configList,function(e){return i("el-option",{key:e.id,attrs:{label:e.id,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"接种阶段:"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择接种阶段"},on:{change:function(t){e.handleTimesCreateChange(e.create.times)}},model:{value:e.create.times,callback:function(t){e.$set(e.create,"times",e._n(t))},expression:"create.times"}},e._l(Object.keys(e.timesList),function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"儿童姓名及编号:"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入儿童姓名",filterable:"",remote:"","remote-method":e.fetchChildList},model:{value:e.create.childId,callback:function(t){e.$set(e.create,"childId",e._n(t))},expression:"create.childId"}},e._l(e.childList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name+"-"+e.id,value:e.id}})}))],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveCreateClick}},[e._v("保存")])],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"修改",visible:e.showEdit},on:{"update:visible":function(t){e.showEdit=t}}},[i("el-form",{ref:"edit",attrs:{model:e.edit,rules:e.editRule}},[i("el-form-item",{attrs:{label:"编号:"}},[i("el-input",{attrs:{readonly:""},model:{value:e.edit.id,callback:function(t){e.$set(e.edit,"id",t)},expression:"edit.id"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最早接种时间:"}},[i("el-input",{attrs:{disabled:"",placeholder:"请输入最早接种时间"},model:{value:e.edit.start,callback:function(t){e.$set(e.edit,"start",e._n(t))},expression:"edit.start"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最晚接种时间:"}},[i("el-input",{attrs:{disabled:"",placeholder:"请输入最晚接种时间"},model:{value:e.edit.end,callback:function(t){e.$set(e.edit,"end",e._n(t))},expression:"edit.end"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"疫苗种类:"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入疫苗种类",filterable:"",remote:"","remote-method":e.fetchConfigList},on:{change:function(t){e.handleConfigIdChange(e.edit.configId)}},model:{value:e.edit.configId,callback:function(t){e.$set(e.edit,"configId",e._n(t))},expression:"edit.configId"}},e._l(e.configList,function(e){return i("el-option",{key:e.id,attrs:{label:e.id,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"接种阶段:"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择接种阶段"},on:{change:function(t){e.handleTimesEditChange(e.edit.times)}},model:{value:e.edit.times,callback:function(t){e.$set(e.edit,"times",e._n(t))},expression:"edit.times"}},e._l(Object.keys(e.timesList),function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"儿童姓名及编号:"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入儿童姓名",filterable:"",remote:"","remote-method":e.fetchChildList},model:{value:e.edit.childId,callback:function(t){e.$set(e.edit,"childId",e._n(t))},expression:"edit.childId"}},e._l(e.childList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name+"-"+e.id,value:e.id}})}))],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveEditClick}},[e._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var d=i("vSla")(c,o,!1,function(e){i("4iCf")},null,null);t.default=d.exports}});
//# sourceMappingURL=2.921b836f45319538a833.js.map
webpackJsonp([3],{NuF7:function(e,t){},oisz:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("4YfN"),a=i.n(n),l=i("7/Cp"),r={name:"i-vaccine",mounted:function(){this.fetch()},data:function(){return{pageIndex:1,pageSize:20,total:0,query:{times:""},showCreate:!1,showEdit:!1,create:this.init(),edit:this.init(),createRule:{scheduling:[{type:"array",trigger:"blur",fields:{start:{type:"number",required:!0,message:"请输入最早接种时间"},end:{type:"number",required:!0,message:"请输入最晚接种时间"},space:{type:"number",required:!0,message:"请输入与下一针间隔"}}}]},editRule:{scheduling:[{type:"array",trigger:"blur",fields:{start:{type:"number",required:!0,message:"请输入最早接种时间"},end:{type:"number",required:!0,message:"请输入最晚接种时间"},space:{type:"number",required:!0,message:"请输入与下一针间隔"}}}]},tableData:[]}},methods:{fetch:function(){var e=this,t=this.pageIndex,i=this.pageSize,n=this.query;l.b.config.index(a()({pageIndex:t,pageSize:i},n)).then(function(t){e.tableData=t.list,e.total=t.total}).catch(function(t){e.$message({message:t,type:"error"})})},handleSearchClick:function(){this.fetch()},handleSizeChange:function(e){this.pageSize=e,this.fetch()},handleCurrentChange:function(e){this.pageIndex=e,this.fetch()},handleDeleteClick:function(e){var t=this;l.b.config.destroy(e).then(function(e){t.fetch(),t.$message({message:"删除成功!",type:"success"})}).catch(function(e){t.$message({message:e,type:"error"})})},init:function(){return{scheduling:[{start:"",end:"",space:""}]}},handleCreateClick:function(){this.showCreate=!0,this.create=this.init()},handleEditClick:function(e){var t=this;this.showEdit=!0,this.edit=this.init(),l.b.config.show(e).then(function(e){t.edit=a()({},e,{scheduling:e.scheduling})}).catch(function(e){t.$message({message:e,type:"error"})})},handleSaveEditClick:function(){var e=this;this.$refs.edit.validate(function(t){if(!t)return!1;l.b.config.update(e.edit).then(function(t){e.showEdit=!1,e.edit=e.init(),e.fetch(),e.$message({message:"修改成功!",type:"success"})}).catch(function(t){e.$message({message:t,type:"error"})})})},handleSaveCreateClick:function(){var e=this;this.$refs.create.validate(function(t){if(!t)return!1;l.b.config.create(e.create).then(function(t){e.showCreate=!1,e.create=e.init(),e.fetch(),e.$message({message:"新增成功!",type:"success"})}).catch(function(t){e.$message({message:t,type:"error"})})})},handleDeleteCreateClick:function(e){this.create.scheduling.splice(e,1)},handleDeleteEditClick:function(e){this.edit.scheduling.splice(e,1)},handleCreateCreateClick:function(){this.create.scheduling.push({start:"",end:"",space:""})},handleCreateEditClick:function(){this.edit.scheduling.push({start:"",end:"",space:""})}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"i-vaccine"},[i("el-row",[i("el-form",{attrs:{inline:""}},[i("el-form-item",{attrs:{label:"疫苗总次数:"}},[i("el-input",{attrs:{placeholder:"请输入疫苗总次数"},model:{value:e.query.times,callback:function(t){e.$set(e.query,"times",t)},expression:"query.times"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSearchClick}},[e._v("查询")]),e._v(" "),i("el-button",{on:{click:e.handleCreateClick}},[e._v("新增")])],1)],1)],1),e._v(" "),i("el-row",[i("el-table",{attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{label:"编号",prop:"id"}}),e._v(" "),i("el-table-column",{attrs:{label:"疫苗总次数",prop:"times"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"125"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(i){e.handleEditClick(t.row)}}}),e._v(" "),i("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(i){e.handleDeleteClick(t.row)}}})]}}])})],1)],1),e._v(" "),i("el-row",{staticClass:"i-vaccine__pageination"},[i("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[20,30,40,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:"新增",visible:e.showCreate},on:{"update:visible":function(t){e.showCreate=t}}},[i("el-form",{ref:"create",attrs:{model:e.create,rules:e.createRule,inline:""}},e._l(e.create.scheduling,function(t,n){return i("el-row",{key:n,attrs:{label:"第"+(n+1)+"次"}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入最早接种时间"},model:{value:t.start,callback:function(i){e.$set(t,"start",e._n(i))},expression:"config.start"}})],1),e._v(" "),i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入最晚接种时间"},model:{value:t.end,callback:function(i){e.$set(t,"end",e._n(i))},expression:"config.end"}})],1),e._v(" "),i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入与下一针间隔"},model:{value:t.space,callback:function(i){e.$set(t,"space",e._n(i))},expression:"config.space"}})],1),e._v(" "),i("el-form-item",[i("el-button",{on:{click:function(t){e.handleDeleteCreateClick(n)}}},[e._v("删除")])],1)],1)})),e._v(" "),i("el-row",[i("el-button",{attrs:{type:"primary"},on:{click:e.handleCreateCreateClick}},[e._v("新增")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveCreateClick}},[e._v("保存")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"修改",visible:e.showEdit},on:{"update:visible":function(t){e.showEdit=t}}},[i("el-form",{ref:"edit",attrs:{model:e.edit,rules:e.editRule,inline:""}},e._l(e.edit.scheduling,function(t,n){return i("el-row",{key:n,attrs:{label:"第"+(n+1)+"次"}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入最早接种时间"},model:{value:t.start,callback:function(i){e.$set(t,"start",e._n(i))},expression:"config.start"}})],1),e._v(" "),i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入最晚接种时间"},model:{value:t.end,callback:function(i){e.$set(t,"end",e._n(i))},expression:"config.end"}})],1),e._v(" "),i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入与下一针间隔"},model:{value:t.space,callback:function(i){e.$set(t,"space",e._n(i))},expression:"config.space"}})],1),e._v(" "),i("el-form-item",[i("el-button",{on:{click:function(t){e.handleDeleteEditClick(n)}}},[e._v("删除")])],1)],1)})),e._v(" "),i("el-row",[i("el-button",{attrs:{type:"primary"},on:{click:e.handleCreateEditClick}},[e._v("新增")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveEditClick}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var c=i("vSla")(r,s,!1,function(e){i("NuF7")},null,null);t.default=c.exports}});
//# sourceMappingURL=3.16172d392a4b561e021e.js.map